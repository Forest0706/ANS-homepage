# 🔧 解决 npm 权限问题

## ❌ 当前错误

```
EACCES: permission denied, rename '/usr/local/lib/node_modules/vercel'
```

这是典型的 macOS npm 权限问题。

---

## ✅ 解决方案（推荐）

### 方案1：使用 npx（最简单，推荐）

不需要全局安装，直接使用 `npx`：

```bash
# 不需要安装，直接使用
npx vercel --version

# 或者直接运行命令
npx vercel login
npx vercel link
npx vercel --prod
```

**优点**：不需要全局安装，避免权限问题

---

### 方案2：使用 sudo（临时解决）

```bash
# 使用 sudo 安装
sudo npm i -g vercel

# 或者使用 sudo 运行
sudo npx vercel --version
```

**注意**：不推荐，可能有安全风险

---

### 方案3：修改 npm 全局目录（长期解决）

```bash
# 1. 创建新的全局目录
mkdir ~/.npm-global

# 2. 配置 npm 使用新目录
npm config set prefix '~/.npm-global'

# 3. 添加到 PATH（需要重启终端或运行）
echo 'export PATH=~/.npm-global/bin:$PATH' >> ~/.zshrc
source ~/.zshrc

# 4. 现在可以正常安装全局包了
npm i -g vercel
```

**优点**：永久解决权限问题

---

### 方案4：使用 nvm（推荐长期使用）

如果你使用 nvm 管理 Node.js 版本，通常不会有这个问题：

```bash
# 检查是否安装了 nvm
nvm --version

# 如果已安装，切换到使用的版本
nvm use node

# 然后安装 vercel
npm i -g vercel
```

---

## 🚀 对于当前任务

**你不需要全局安装 vercel！**

可以直接使用：

```bash
# 1. 登录 Vercel（使用 npx）
npx vercel login

# 2. 链接项目
cd /Users/lilinzi/ANS-homepage
npx vercel link

# 3. 部署
npx vercel --prod
```

或者直接在 Vercel 网站操作（推荐）：
- 在 Vercel Dashboard 中添加环境变量
- 通过网页界面连接 Git 仓库

---

## 📝 快速解决

**最简单的方法**：使用 `npx`，不需要安装：

```bash
# 直接在项目中使用
cd /Users/lilinzi/ANS-homepage

# 如果需要使用 vercel CLI
npx vercel --version
npx vercel login
npx vercel link
```

**不需要全局安装！** ✅
